<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Slugid.py by taskcluster</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Slugid.py</h1>
      <h2 class="project-tagline">A python port of https://github.com/taskcluster/slugid</h2>
      <a href="https://github.com/taskcluster/slugid.py" class="btn">View on GitHub</a>
      <a href="https://github.com/taskcluster/slugid.py/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/taskcluster/slugid.py/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="slugidpy---compressed-uuids-for-python" class="anchor" href="#slugidpy---compressed-uuids-for-python" aria-hidden="true"><span class="octicon octicon-link"></span></a>slugid.py - Compressed UUIDs for python</h1>

<p><img src="https://tools.taskcluster.net/lib/assets/taskcluster-120.png"></p>

<p><a href="http://travis-ci.org/taskcluster/slugid.py"><img src="https://travis-ci.org/taskcluster/slugid.py.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/taskcluster/slugid.py?branch=master"><img src="https://coveralls.io/repos/taskcluster/slugid.py/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a>
<a href="https://github.com/taskcluster/slugid.py/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MPL%202.0-orange.svg" alt="License"></a>
<a href="https://pypi.python.org/pypi/slugid"><img src="https://img.shields.io/pypi/v/slugid.svg" alt="pypi Version"></a>
<a href="https://pypi.python.org/pypi/slugid"><img src="https://img.shields.io/pypi/dm/slugid.svg" alt="Downloads"></a></p>

<p>A python 2.7 and python 3.5 compatible module for generating v4 UUIDs and encoding them into 22 character
URL-safe base64 slug representation (see <a href="http://tools.ietf.org/html/rfc4648#section-5">RFC 4648 sec. 5</a>).</p>

<p>Slugs are url-safe base64 encoded v4 uuids, stripped of base64 <code>=</code> padding.</p>

<p>There are two methods for generating slugs - <code>slugid.v4()</code> and
<code>slugid.nice()</code>.</p>

<ul>
<li>The <code>slugid.v4()</code> method returns a slug from a randomly generated v4 uuid.</li>
<li>The <code>slugid.nice()</code> method returns a v4 slug which conforms to a set of
"nice" properties. At the moment the only "nice" property is that the slug
starts with <code>[A-Za-f]</code>, which in turn implies that the first (most
significant) bit of its associated uuid is set to 0.</li>
</ul>

<p>The purpose of the <code>slugid.nice()</code> method is to support having slugids which
can be used in more contexts safely. Regular slugids can safely be used in
urls, and for example in AMQP routing keys. However, slugs beginning with <code>-</code>
may cause problems when used as command line parameters.</p>

<p>In contrast, slugids generated by the <code>slugid.nice()</code> method can safely be
used as command line parameters. This comes at a cost to entropy (121 bits vs
122 bits for regular v4 slugs).</p>

<p>Slug consumers should consider carefully which of these two slug generation
methods to call. Is it more important to have maximum entropy, or to have
slugids that do not need special treatment when used as command line
parameters? This is especially important if you are providing a service which
supplies slugs to unexpecting tool developers downstream, who may not realise
the risks of using your regular v4 slugs as command line parameters, especially
since this would arise only as an intermittent issue (one time in 64).</p>

<p>Generated slugs take the form <code>[A-Za-z0-9_-]{22}</code>, or more precisely:</p>

<ul>
<li><p><code>slugid.v4()</code> slugs conform to
<code>[A-Za-z0-9_-]{8}[Q-T][A-Za-z0-9_-][CGKOSWaeimquy26-][A-Za-z0-9_-]{10}[AQgw]</code></p></li>
<li><p><code>slugid.nice()</code> slugs conform to
<code>[A-Za-f][A-Za-z0-9_-]{7}[Q-T][A-Za-z0-9_-][CGKOSWaeimquy26-][A-Za-z0-9_-]{10}[AQgw]</code></p></li>
</ul>

<p>RFC 4122 defines the setting of 6 bits of the v4 UUID which implies v4 slugs
provide 128 - 6 = 122 bits entropy. Due to the (un)setting of the first bit
of "nice" slugs, nice slugs provide therefore 121 bits entropy.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<div class="highlight highlight-python"><pre><span class="pl-k">import</span> slugid

<span class="pl-c"># Generate "nice" URL-safe base64 encoded UUID version 4 (random)</span>
slug <span class="pl-k">=</span> slugid.nice()  <span class="pl-c"># a8_YezW8T7e1jLxG7evy-A</span>

<span class="pl-c"># Alternative, if slugs will not be used as command line parameters</span>
slug <span class="pl-k">=</span> slugid.v4()    <span class="pl-c"># -9OpXaCORAaFh4sJRk7PUA</span>

<span class="pl-c"># Get python uuid.UUID object</span>
uuid <span class="pl-k">=</span> slugid.decode(slug)

<span class="pl-c"># Compress to slug again</span>
<span class="pl-k">assert</span>(slug <span class="pl-k">==</span> slugid.encode(uuid))</pre></div>

<h2>
<a id="rng-characteristics" class="anchor" href="#rng-characteristics" aria-hidden="true"><span class="octicon octicon-link"></span></a>RNG Characteristics</h2>

<p>UUID generation is performed by the built-in python <a href="https://docs.python.org/2/library/uuid.html">uuid
library</a> which does not document
its randomness, but falls back to system uuid-generation libraries where
available, then urandom, then random. Therefore generated slugids match these
rng characteristics.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>The <code>slugid</code> library is released on the MPL 2.0 license, see the <code>LICENSE</code>
for complete license.</p>

<h2>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h2>

<div class="highlight highlight-bash"><pre>pip install -r requirements.txt
tox</pre></div>

<h2>
<a id="publishing" class="anchor" href="#publishing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Publishing</h2>

<p>To republish this library to pypi.python.org, update the version number in
<code>slugid/__init__.py</code>, commit it, push to github, and then run:</p>

<div class="highlight highlight-bash"><pre><span class="pl-c"># delete stale versions</span>
rm -rf dist

<span class="pl-c"># build source package</span>
python setup.py sdist

<span class="pl-c"># publish it</span>
twine upload -s dist/<span class="pl-k">*</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/taskcluster/slugid.py">Slugid.py</a> is maintained by <a href="https://github.com/taskcluster">taskcluster</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
